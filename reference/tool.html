<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰‹æœ¯å·¥å…·æˆªé¢é¢„è§ˆ</title>
    <style>
        body {
            font-family: "Segoe UI", Roboto, "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .main-layout {
            display: flex;
            /* ğŸŸ¡ å…³é”®ä¿®æ”¹ï¼šå…è®¸æ¢è¡Œ */
            flex-wrap: wrap; 
            gap: 20px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            /* ğŸŸ¡ ä¿®æ”¹ï¼šæœ€å¤§å®½åº¦è®¾ä¸º100%æˆ–æ›´å¤§ï¼Œé€‚åº”å®½å± */
            max-width: 100%; 
            width: 100%;
        }

        .controls {
            /* ğŸŸ¡ ä¿®æ”¹ï¼šflex-basis è®¾ä¸º 300pxï¼Œå…è®¸ä¼¸ç¼©ã€‚å½“ç©ºé—´<300æ—¶ä¼šè‡ªåŠ¨æ¢è¡Œ */
            flex: 1 1 300px;
            padding-right: 20px;
            /* ç§»é™¤å³è¾¹æ¡†ï¼Œå› ä¸ºæ¢è¡Œåå³è¾¹æ¡†ä¼šå¾ˆéš¾çœ‹ï¼Œæ”¹ä¸ºä¸‹è¾¹æ¡†æˆ–ç”¨gapè‡ªç„¶åˆ†éš” */
            border-right: none; 
        }
        
        /* ğŸŸ¡ ä¿®æ”¹ï¼šè®©ç”»å¸ƒå’Œä¸‹æ–¹çš„æŒ‰é’®çºµå‘æ’åˆ— */
        .canvas-wrapper {
            flex: 1 1 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center; /* ğŸŸ¢ æ ¸å¿ƒï¼šç¡®ä¿æ‰€æœ‰å­å…ƒç´ ä¸­è½´å¯¹é½ */
            background-color: #fff;
            position: relative;
        }

        /* ğŸŸ¢ æ–°å¢ï¼šè¾…åŠ©çº¿æ§åˆ¶æ æ ·å¼ */
        .canvas-controls-bar {
            margin-top: 15px;
            padding: 8px 15px;
            background-color: #f5f5f5;
            border-radius: 20px;
            font-size: 14px;
            color: #555;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ğŸŸ¢ æ–°å¢ï¼šåªè¯»æ•°æ®çš„æ ·å¼ (ç”¨äºå­”å¾„æ˜¾ç¤º) */
        .readonly-value {
            font-family: monospace;
            color: #1976d2; /* è“è‰²é«˜äº® */
            background-color: #e3f2fd;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 14px;
        }

        /* ğŸŸ¢ æ–°å¢ï¼šä¼˜åŒ–åçš„ç»“æœé¢æ¿æ ·å¼ */
        .result-box {
            width: 100%;           /* åœ¨æ‰‹æœºç«¯å æ»¡å®¹å™¨ */
            max-width: 560px;      /* ğŸŸ¢ å…³é”®ï¼šé™åˆ¶æœ€å¤§å®½ = ç”»å¸ƒå®½ */
            box-sizing: border-box;/* ç¡®ä¿å†…è¾¹è·ä¸æ’‘å¤§ç›’å­ */
            /* åŸæœ‰çš„æ ·å¼ä¿ç•™... */
            background-color: #fafafa;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            margin-bottom: 10px; /* å¢åŠ ä¸€ç‚¹ä¸‹é—´è·ï¼Œå’Œç”»å¸ƒéš”å¼€ */
        }
        .result-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
            color: #666;
        }
        .result-line.main {
            font-weight: bold;
            color: #333;
            font-size: 14px;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        .result-line.highlight {
            background-color: #e8f5e9;
            padding: 5px;
            border-radius: 4px;
            color: #2e7d32;
            font-weight: bold;
            margin-top: 8px;
        }

        /* ğŸŸ¢ æ–°å¢ï¼šä¸“é—¨ç”¨äºæ”¾å¤§æ•°å­—çš„ç±» */
        .result-val {
            font-family: Consolas, Monaco, monospace;
            font-size: 16px; /* é»˜è®¤æ•°å­—å˜å¤§ */
            font-weight: bold;
            color: #333;
        }
        .result-val.large {
            font-size: 18px; /* é‡ç‚¹æ•°å­—æ›´å¤§ */
        }

        canvas {
            width: 100%;          /* å…è®¸ç¼©å° */
            max-width: 560px;     /* ğŸŸ¢ å…³é”®ï¼šé”å®šæœ€å¤§å®½ */
            height: auto;         /* ä¿æŒæ¯”ä¾‹ */
            /* åŸæœ‰çš„æ ·å¼ä¿ç•™... */
            border: 1px solid #e0e0e0;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.02);
        }

        .section-header {
            font-size: 16px;
            font-weight: 700;
            color: #444;
            margin-top: 20px;
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid #eef0f5;
            display: flex;
            align-items: center;
        }
        
        .section-header:first-of-type {
            margin-top: 0;
        }

        .control-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        label {
            font-size: 14px;
            color: #555;
        }

        input[type="number"] {
            width: 90px;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: right;
            font-family: monospace;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        input[type="number"]:focus {
            border-color: #6a71a5;
            outline: none;
        }
        
        /* Highlight specific inputs */
        #gap {
            background-color: #fff8e1;
            border-color: #ffe082;
        }

        .note {
            font-size: 12px;
            color: #888;
            margin-top: 4px;
            font-style: italic;
        }

        .canvas-controls-bar {
            width: 100%;
            max-width: 560px;     /* ğŸŸ¢ å…³é”®ï¼šå¯¹é½ç”»å¸ƒ */
            box-sizing: border-box;
            /* åŸæœ‰çš„æ ·å¼ä¿ç•™... */
            margin-top: 15px;
            padding: 8px 15px;
            background-color: #f5f5f5;
            border-radius: 20px;
            font-size: 14px;
            color: #555;
            display: flex;
            align-items: center;
            justify-content: center; /* è®©é‡Œé¢çš„æ–‡å­—/å¤é€‰æ¡†å±…ä¸­ï¼Œå¥½çœ‹ä¸€ç‚¹ */
            gap: 8px;
        }
    </style>
</head>
<body>

    <h2>æ‰‹æœ¯å·¥å…·æˆªé¢é¢„è§ˆ</h2>

    <div class="main-layout">
        <div class="controls">
            
            <div class="section-header">åŸºç¡€å°ºå¯¸ (Base)</div>
            <div class="control-row">
                <label>å¤–åœ†ç›´å¾„ (OD) (mm):</label>
                <input type="number" id="od" value="2.40" step="0.01">
            </div>
            <div class="control-row">
                <label>å†…åœ†ç›´å¾„ (ID) (mm):</label>
                <input type="number" id="id" value="0.86" step="0.01">
            </div>
            <div class="control-row">
                <label title="å­”å¾„ = è½´å¾„ + é—´éš™">è½´å­”é—´éš™ (Clearance) (mm):</label>
                <input type="number" id="clearance" value="0.02" step="0.01" style="background-color: #e3f2fd;">
            </div>
            <div class="control-row">
                <label title="å­”ä¸å­”ä¹‹é—´çš„æœ€å°å®ä½“å£åš">æœ€å°é—´è·/å£åš (Gap) (mm):</label>
                <input type="number" id="gap" value="0.11" step="0.01">
            </div>

            <div class="section-header">ç¬¬ä¸€èŠ‚å­” (Section 1)</div>
            <div class="control-row">
                <label>åˆ†åº¦åœ†ç›´å¾„ (PCD) (mm):</label>
                <input type="number" id="pcd1" value="1.66" step="0.01">
            </div>
            <div class="control-row">
                <label>è½´æ•°é‡ (4çš„å€æ•°):</label>
                <input type="number" id="n1" value="4" step="4">
            </div>
            <div class="control-row">
                <label>è½´ç›´å¾„ (Dia) (mm):</label>
                <input type="number" id="d1" value="0.4" step="0.01">
            </div>
            <div class="control-row">
                <label>å®é™…å­”å¾„ (Hole) (mm):</label>
                <span id="holeDia1Display" class="readonly-value">--</span>
            </div>
            <div class="control-row">
                <label>ä¸­å¿ƒåˆ†å¸ƒè§’åº¦ (Â°):</label>
                <input type="number" id="angle1" value="0" title="0åº¦è¡¨ç¤ºåˆ†å¸ƒåœ¨åå­—è½´çº¿ä¸Š">
            </div>

            <div class="section-header">ç¬¬äºŒèŠ‚å­” (Section 2)</div>
            <div class="control-row">
                <label>åˆ†åº¦åœ†ç›´å¾„ (PCD) (mm):</label>
                <input type="number" id="pcd2" value="1.85" step="0.01">
            </div>
            <div class="control-row">
                <label>è½´æ•°é‡ (4çš„å€æ•°):</label>
                <input type="number" id="n2" value="8" step="4">
            </div>
            <div class="control-row">
                <label>è½´ç›´å¾„ (Dia) (mm):</label>
                <input type="number" id="d2" value="0.3" step="0.01">
            </div>
            <div class="control-row">
                <label>å®é™…å­”å¾„ (Hole) (mm):</label>
                <span id="holeDia2Display" class="readonly-value">--</span>
            </div>
            <div class="control-row">
                <label>ä¸­å¿ƒåˆ†å¸ƒè§’åº¦ (Â°):</label>
                <input type="number" id="angle2" value="45" title="45åº¦è¡¨ç¤ºåˆ†å¸ƒåœ¨å¯¹è§’çº¿ä¸Š">
            </div>
            <div class="note">ç¬¬äºŒèŠ‚å­”å°†å…³äº45Â°çº¿å¯¹ç§°ç´§å¯†æ’åˆ—</div>
            
        </div>

        <div class="canvas-wrapper">
            <div class="result-box">
                <div class="result-line main" style="border-bottom: 1px solid #ddd; padding-bottom: 10px;">
                    <span style="font-size: 16px;">ä¸€äºŒèŠ‚æœ€å°å£åš:</span>
                    <span id="minWallThickness" class="result-val large" style="color: #d32f2f;">--</span>
                </div>

                <div class="result-line">
                    <span>å•è½´æ¨¡é‡ (W1 / W2):</span>
                    <span class="result-val" style="font-size: 16px;">
                        <span id="singleW1">--</span> / <span id="singleW2">--</span>
                    </span>
                </div>
                <div class="result-line">
                    <span>æ€»æ¨¡é‡ (Total W1):</span>
                    <span id="modulusSec1" class="result-val" style="color: #1565c0;">--</span>
                </div>
                <div class="result-line">
                    <span>æ€»æ¨¡é‡ (Total W2):</span>
                    <span id="modulusSec2" class="result-val" style="color: #1565c0;">--</span>
                </div>
                
                <div class="result-line highlight" style="margin-top: 10px; padding: 10px; background-color: #e8f5e9;">
                    <span style="font-weight: bold; color: #2e7d32; font-size: 15px;">åˆšåº¦æ¯” (W2 / W1):</span>
                    <span id="modulusRatio" class="result-val large" style="color: #2e7d32;">--</span>
                </div>
            </div>

            <canvas id="previewCanvas" width="560" height="560"></canvas>
            
            <div class="canvas-controls-bar">
                <input type="checkbox" id="showGuides" checked>
                <label for="showGuides" style="cursor: pointer; margin-bottom: 0;">æ˜¾ç¤ºè¾…åŠ©å‚è€ƒçº¿ (Guides)</label>
            </div>
        </div>

    </div>

    <script>
        const canvas = document.getElementById('previewCanvas');
        const ctx = canvas.getContext('2d');
        const inputs = document.querySelectorAll('input');

        inputs.forEach(input => {
            input.addEventListener('input', draw);
            input.addEventListener('change', draw);
        });

        function draw() {
            // è·å–è¾“å…¥å€¼
            const od = parseFloat(document.getElementById('od').value) || 2.4;
            const id = parseFloat(document.getElementById('id').value) || 1.02;
            const gap = parseFloat(document.getElementById('gap').value) || 0.05;
            const clearance = parseFloat(document.getElementById('clearance').value) || 0;

            // Section 1
            const pcd1 = parseFloat(document.getElementById('pcd1').value) || 1.66;
            const n1 = parseInt(document.getElementById('n1').value) || 4;
            const shaftD1 = parseFloat(document.getElementById('d1').value) || 0.40;
            const angle1 = parseFloat(document.getElementById('angle1').value) || 0;

            // Section 2
            const pcd2 = parseFloat(document.getElementById('pcd2').value) || 1.85;
            const n2 = parseInt(document.getElementById('n2').value) || 8;
            const shaftD2 = parseFloat(document.getElementById('d2').value) || 0.30;
            const angle2 = parseFloat(document.getElementById('angle2').value) || 45;

            // è®¡ç®—ç»˜å›¾ç”¨çš„â€œå­”å¾„â€ (Hole Dia)
            const holeD1 = shaftD1 + clearance;
            const holeD2 = shaftD2 + clearance;

            const showGuides = document.getElementById('showGuides').checked;

            // åŸºç¡€ç»˜å›¾è®¾ç½®
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            // è‡ªåŠ¨ç¼©æ”¾: ç•™ç™½ 30px
            const maxRadius = od / 2;
            const scale = (canvas.width / 2 - 30) / maxRadius;

            // --- ç»˜å›¾å‡½æ•° ---

            function drawCircle(r, color, stroke = true, dashed = false) {
                if(r <= 0) return;
                ctx.beginPath();
                if (dashed) ctx.setLineDash([5, 3]); else ctx.setLineDash([]);
                ctx.arc(cx, cy, r * scale, 0, 2 * Math.PI);
                if (color) { ctx.fillStyle = color; ctx.fill(); }
                if (stroke) { ctx.strokeStyle = '#333'; ctx.lineWidth = 1.2; ctx.stroke(); }
                ctx.setLineDash([]);
            }

            // --- æ ¸å¿ƒé€»è¾‘: ç°‡çŠ¶åˆ†å¸ƒè®¡ç®— ---
            // pcd: åˆ†åº¦åœ†ç›´å¾„
            // totalHoles: æ€»å­”æ•°
            // dia: å­”å¾„
            // gap: æœ€å°å£åš
            // baseAnchorDeg: ç°‡çš„ä¸­å¿ƒè§’åº¦ (ä¾‹å¦‚ 0 æˆ– 45)
            function drawClusteredHoles(pcd, totalHoles, dia, baseAnchorDeg) {
                const holeCoordinates = [];
                if (totalHoles <= 0 || pcd <= 0) return;

                const r = (pcd / 2) * scale;
                const holeR = (dia / 2) * scale;
                
                // 1. è®¡ç®—å•ä¸ªå­”+é—´è·æ‰€å çš„è§’åº¦ (å¼§é•¿å…¬å¼åæ¨)
                // å¼¦é•¿ chord = dia + gap
                // è§’åº¦ alpha = 2 * asin(chord / pcd)
                // æ³¨æ„: è¿™é‡Œçš„ chord æ˜¯å‡ ä½•ä¸Šçš„ç›´çº¿è·ç¦»
                const chord = dia + gap;
                // é˜²æ­¢ chord > pcd å¯¼è‡´è®¡ç®—é”™è¯¯
                if (chord > pcd) return; 
                const anglePerHole = 2 * Math.asin(chord / pcd); // å¼§åº¦

                // 2. æ¯ä¸ªè±¡é™æœ‰å¤šå°‘ä¸ªå­”
                // å‡è®¾æ˜¯å¯¹ç§°è®¾è®¡ï¼Œå­”æ•°åº”ä¸º4çš„å€æ•°ã€‚å¦‚æœä¸æ˜¯ï¼Œè¿™é‡Œå‘ä¸‹å–æ•´ï¼Œä»…ä½œç¤ºæ„ã€‚
                const holesPerQuadrant = Math.floor(totalHoles / 4);
                if (holesPerQuadrant === 0) return;

                // 3. è®¡ç®—ä¸€ä¸ªç°‡çš„æ€»å¼ è§’
                // ç°‡å®½ = (å­”æ•°-1) * é—´è·è§’ã€‚å¦‚æœæ˜¯1ä¸ªå­”ï¼Œå®½åº¦ä¸º0ã€‚
                const clusterWidth = (holesPerQuadrant - 1) * anglePerHole;

                // 4. ç»˜åˆ¶å››ä¸ªç°‡ (0, 90, 180, 270 åç§» + baseAnchorDeg)
                for (let q = 0; q < 4; q++) {
                    // å½“å‰è±¡é™çš„ä¸­å¿ƒè§’åº¦ (å¼§åº¦)
                    // æ³¨æ„ï¼šCanvasåæ ‡ç³»ï¼Œé¡ºæ—¶é’ˆä¸ºæ­£ï¼Œä½†æ•°å­¦ä¹ æƒ¯é€†æ—¶é’ˆã€‚
                    // ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬æŒ‰é¡ºæ—¶é’ˆè®¡ç®— (3ç‚¹é’Ÿæ–¹å‘ä¸º0)
                    // baseAnchorDeg è¾“å…¥å¦‚æœæ˜¯ 45ï¼Œæˆ‘ä»¬å¸Œæœ›æ˜¯åœ¨ 45åº¦æ–¹å‘ã€‚
                    // è½¬æ¢è§’åº¦ï¼šMath.PI * (baseAnchorDeg + q*90) / 180
                    // ä¸ºäº†ç¬¦åˆå¸¸è§„å·¥ç¨‹ç›´è§‰ (0åº¦åœ¨å³è¾¹)ï¼Œè¿™é‡Œç›´æ¥åŠ ã€‚
                    
                    const quadrantCenterRad = (baseAnchorDeg + q * 90) * (Math.PI / 180);
                    
                    // ç°‡çš„èµ·å§‹è§’åº¦ (ä¸­å¿ƒ - åŠå®½)
                    const startRad = quadrantCenterRad - (clusterWidth / 2);

                    for (let i = 0; i < holesPerQuadrant; i++) {
                        const theta = startRad + i * anglePerHole;
                        
                        // æåæ ‡è½¬ç›´è§’åæ ‡ (Canvas Yè½´å‘ä¸‹)
                        const x = cx + r * Math.cos(theta);
                        const y = cy + r * Math.sin(theta); 
                        holeCoordinates.push({x: x, y: y});

                        // ç»˜åˆ¶å­”
                        ctx.beginPath();
                        ctx.arc(x, y, holeR, 0, 2 * Math.PI);
                        ctx.fillStyle = '#7a81b5'; // æ·±ç´«
                        ctx.fill();
                        ctx.strokeStyle = '#000';
                        ctx.lineWidth = 1;
                        ctx.stroke();

                        // åå­—æ ‡è®°
                        if (showGuides) {
                            ctx.beginPath();
                            const len = holeR + 4;
                            // å¾„å‘çº¿
                            ctx.moveTo(x - len * Math.cos(theta), y - len * Math.sin(theta));
                            ctx.lineTo(x + len * Math.cos(theta), y + len * Math.sin(theta));
                            // åˆ‡å‘çº¿
                            ctx.moveTo(x - len * Math.cos(theta + Math.PI/2), y - len * Math.sin(theta + Math.PI/2));
                            ctx.lineTo(x + len * Math.cos(theta + Math.PI/2), y + len * Math.sin(theta + Math.PI/2));
                            ctx.strokeStyle = '#333';
                            ctx.lineWidth = 0.5;
                            ctx.stroke();
                        }
                    }
                }

                // ç»˜åˆ¶PCDè™šçº¿
                if (showGuides) {
                    drawCircle(pcd / 2, null, true, true);
                }

                return holeCoordinates;
            }

            // --- å¼€å§‹ç»˜å›¾æµç¨‹ ---

            // 1. å¤–åœ† (OD)
            drawCircle(od / 2, '#9da3c9', true);

            // 2. ç¬¬ä¸€èŠ‚å­” (Section 1)
            // é€»è¾‘ï¼šé”šå®šåœ¨ angle1 (é»˜è®¤0åº¦)
            const points1 = drawClusteredHoles(pcd1, n1, holeD1, angle1);

            // 3. ç¬¬äºŒèŠ‚å­” (Section 2)
            // é€»è¾‘ï¼šé”šå®šåœ¨ angle2 (é»˜è®¤45åº¦)ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„ Gap æŒ¤åœ¨ä¸€èµ·
            const points2 = drawClusteredHoles(pcd2, n2, holeD2, angle2);

            // 4. å†…åœ† (ID)
            drawCircle(id / 2, '#6a71a5', true);

            // 5. å…¨å±€åå­—çº¿å’Œå¯¹è§’çº¿
            if (showGuides) {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 0.5;
                ctx.setLineDash([20, 5, 5, 5]); // é•¿ç‚¹åˆ’çº¿

                // 0-180 & 90-270
                ctx.beginPath();
                ctx.moveTo(cx - maxRadius * scale - 10, cy);
                ctx.lineTo(cx + maxRadius * scale + 10, cy);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(cx, cy - maxRadius * scale - 10);
                ctx.lineTo(cx, cy + maxRadius * scale + 10);
                ctx.stroke();

                // 45åº¦çº¿ (è¾…åŠ©çœ‹å¯¹ç§°æ€§)
                ctx.setLineDash([5, 5]); // è™šçº¿
                ctx.strokeStyle = '#666';
                const diagLen = (maxRadius * scale) + 5;
                const diagOffset = diagLen * Math.sin(Math.PI/4);
                
                ctx.beginPath();
                ctx.moveTo(cx - diagOffset, cy - diagOffset);
                ctx.lineTo(cx + diagOffset, cy + diagOffset);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(cx - diagOffset, cy + diagOffset);
                ctx.lineTo(cx + diagOffset, cy - diagOffset);
                ctx.stroke();
                
                ctx.setLineDash([]);
            }
            
            // --- æµ‹ç®—ç»“æœï¼šå£åš ---
            if (points1 && points1.length > 0 && points2 && points2.length > 0) {
                let minDistPx = Infinity;
                for (let p1 of points1) {
                    for (let p2 of points2) {
                        const dist = Math.hypot(p1.x - p2.x, p1.y - p2.y);
                        if (dist < minDistPx) minDistPx = dist;
                    }
                }
                const distMM = minDistPx / scale;
                // ğŸŸ¡ã€é€»è¾‘å˜æ›´ã€‘å£åš = åœ†å¿ƒè· - å­”åŠå¾„1 - å­”åŠå¾„2
                const clearanceVal = distMM - (holeD1 / 2) - (holeD2 / 2);

                const resEl = document.getElementById('minWallThickness');
                resEl.textContent = clearanceVal.toFixed(3) + ' mm';
                if (clearanceVal < gap) resEl.style.color = "red";
                else resEl.style.color = "green";
            } else {
                document.getElementById('minWallThickness').textContent = "--";
            }

            const calcW = (d) => (Math.PI * Math.pow(d, 3)) / 32;

            const w1 = calcW(shaftD1);
            const w2 = calcW(shaftD2);
            
            // æ€»å’Œ
            const totalW_Sec1 = (n1 * w1) + (n2 * w2);
            const totalW_Sec2 = (n2 * w2);

            // ğŸŸ¢ã€æ–°å¢ã€‘æ˜¾ç¤ºå®é™…å­”å¾„ (Hole Diameter)
            document.getElementById('holeDia1Display').textContent = holeD1.toFixed(2);
            document.getElementById('holeDia2Display').textContent = holeD2.toFixed(2);

            // ğŸŸ¢ã€æ–°å¢ã€‘æ˜¾ç¤ºå•æ ¹è½´æ¨¡é‡ (Single Shaft Modulus)
            // w1 å’Œ w2 å·²ç»åœ¨ä¸Šä¸€æ­¥é€šè¿‡ calcW ç®—å‡ºæ¥äº†
            // ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•æˆ–è€…ä¿ç•™æ›´å¤šå°æ•°ä½ï¼Œå› ä¸ºå•æ ¹æ•°å€¼å¯èƒ½å¾ˆå°
            document.getElementById('singleW1').textContent = w1.toFixed(5); 
            document.getElementById('singleW2').textContent = w2.toFixed(5);

            // æ€»æ¨¡é‡æ˜¾ç¤º
            document.getElementById('modulusSec1').textContent = totalW_Sec1.toFixed(5);
            document.getElementById('modulusSec2').textContent = totalW_Sec2.toFixed(5);

            // åˆšåº¦æ¯”æ˜¾ç¤º
            let ratio = 0;
            if (totalW_Sec1 > 0) ratio = totalW_Sec2 / totalW_Sec1;
            document.getElementById('modulusRatio').textContent = ratio.toFixed(3);

        }

        // åˆå§‹åŒ–
        draw();
    </script>
</body>
</html>